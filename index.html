<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PULSE OS v05</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        .pulse-input { background: #0f172a; border: 1px solid rgba(255,255,255,0.05); border-radius: 1rem; padding: 1rem; font-size: 0.85rem; font-weight: 700; color: #f8fafc; outline: none; width: 100%; transition: all 0.2s; }
        .pulse-input:focus { border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.1); }
        .loader { width: 20px; height: 20px; border: 3px solid #FFF; border-bottom-color: transparent; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite; }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-950 text-slate-100 italic selection:bg-blue-500/30 overflow-x-hidden">

    <!-- TELA DE LOGIN -->
    <div id="login-screen" class="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center p-6 transition-all duration-500">
        <div class="w-full max-w-sm space-y-8 text-center">
            <div class="space-y-2">
                <h1 class="text-5xl font-black tracking-tighter text-blue-500 leading-none">PULSE</h1>
                <p class="text-[10px] font-black uppercase tracking-[0.4em] text-slate-500">SaaS Pessoal</p>
            </div>
            
            <div class="bg-slate-900/50 p-8 rounded-[3rem] border border-white/5 space-y-4 shadow-2xl relative overflow-hidden">
                <div class="space-y-4 relative z-10">
                    <input type="text" id="login-user" placeholder="USU√ÅRIO" class="pulse-input text-center uppercase">
                    <input type="password" id="login-pass" placeholder="SENHA" class="pulse-input text-center">
                    <button onclick="window.handleLogin()" id="btn-login" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg shadow-blue-500/20 active:scale-95 transition-all flex items-center justify-center gap-2">
                        <span>Autenticar</span>
                    </button>
                </div>
                <div class="absolute -bottom-10 -right-10 w-32 h-32 bg-blue-500/5 rounded-full blur-3xl"></div>
            </div>
            <p id="login-error" class="text-[10px] text-red-500 font-bold uppercase hidden"></p>
        </div>
    </div>

    <!-- MODAL FOR√áAR TROCA DE SENHA -->
    <div id="modal-change-pass" class="fixed inset-0 z-[300] bg-black/95 backdrop-blur-xl hidden flex-col items-center justify-center p-6">
        <div class="bg-slate-900 border border-orange-500/30 p-8 rounded-[3rem] w-full max-w-sm shadow-2xl space-y-6">
            <div class="text-center">
                <div class="w-16 h-16 bg-orange-500/10 text-orange-500 rounded-3xl flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="shield-alert" class="w-8 h-8"></i>
                </div>
                <h3 class="text-xl font-black text-white uppercase tracking-tighter leading-tight">Seguran√ßa Exigida</h3>
                <p class="text-[10px] text-slate-400 mt-2 uppercase tracking-widest">A senha "123456" √© apenas tempor√°ria.</p>
            </div>
            <div class="space-y-3">
                <input type="password" id="new-pass" placeholder="NOVA SENHA" class="pulse-input border-orange-500/20">
                <input type="password" id="confirm-pass" placeholder="CONFIRMAR SENHA" class="pulse-input border-orange-500/20">
                <button onclick="window.submitNewPassword()" id="btn-change-pass" class="w-full bg-orange-600 text-white py-4 rounded-2xl font-black uppercase text-xs tracking-widest active:scale-95 transition-all">Atualizar Acesso</button>
            </div>
        </div>
    </div>

    <!-- ESTRUTURA PRINCIPAL -->
    <div id="app-content" class="hidden min-h-screen flex flex-col md:flex-row">
        
        <!-- SIDEBAR -->
        <aside class="hidden md:flex flex-col w-64 bg-slate-900 border-r border-white/5 fixed h-full z-50 p-6">
            <div class="mb-10">
                <h1 class="text-3xl font-black tracking-tighter text-blue-500">PULSE</h1>
                <p class="text-[9px] font-black uppercase tracking-[0.3em] text-slate-500">Makro Engenharia</p>
            </div>

            <nav class="flex-1 space-y-2">
                <button onclick="window.openTab('dashboard')" class="nav-item w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all text-blue-500 bg-blue-500/10 font-black uppercase text-[10px] tracking-widest" id="side-dashboard">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
                </button>
                <button onclick="window.openTab('saude')" class="nav-item w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all text-slate-500 hover:bg-white/5 font-black uppercase text-[10px] tracking-widest">
                    <i data-lucide="activity" class="w-5 h-5"></i> Sa√∫de
                </button>
                <button onclick="window.openTab('bike')" class="nav-item w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all text-slate-500 hover:bg-white/5 font-black uppercase text-[10px] tracking-widest">
                    <i data-lucide="bike" class="w-5 h-5"></i> <span class="side-bike-name">Ve√≠culo</span>
                </button>
                <button onclick="window.openTab('work')" class="nav-item w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all text-slate-500 hover:bg-white/5 font-black uppercase text-[10px] tracking-widest">
                    <i data-lucide="briefcase" class="w-5 h-5"></i> Work
                </button>
                <button onclick="window.openTab('financas')" class="nav-item w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all text-slate-500 hover:bg-white/5 font-black uppercase text-[10px] tracking-widest">
                    <i data-lucide="wallet" class="w-5 h-5"></i> Finan√ßas
                </button>
            </nav>

            <div class="mt-auto pt-6 border-t border-white/5 space-y-4">
                <div class="flex flex-col gap-2 p-4 bg-slate-950 rounded-2xl border border-white/5">
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                        <span id="display-user-name" class="text-[8px] font-black uppercase tracking-widest text-emerald-500">Conectado</span>
                    </div>
                    <div class="pt-2 border-t border-white/5">
                        <p class="text-[9px] font-black text-blue-500 uppercase tracking-tighter">Fortaleza, CE</p>
                        <p id="side-weather" class="text-[10px] font-bold text-slate-400">30¬∞C ‚Ä¢ Ensolarado</p>
                    </div>
                </div>
                <button onclick="window.logout()" class="w-full text-[8px] font-black uppercase text-red-500/50 hover:text-red-500">Sair do Sistema</button>
            </div>
        </aside>

        <!-- CONTE√öDO -->
        <main class="flex-1 md:ml-64 p-6 md:p-12 pb-24 md:pb-12 max-w-5xl mx-auto w-full">
            
            <!-- DASHBOARD -->
            <section id="dashboard" class="tab-content active space-y-6">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-emerald-900/20 border border-emerald-500/10 p-6 rounded-[2.5rem] flex flex-col justify-end min-h-[140px]">
                        <p class="text-3xl font-black text-emerald-400">R$ <span id="dash-saldo">0</span></p>
                        <p class="text-[8px] font-black uppercase tracking-widest text-emerald-500/60 mt-2 leading-none">Saldo Atual</p>
                    </div>
                    <div class="bg-indigo-900/20 border border-indigo-500/10 p-6 rounded-[2.5rem] flex flex-col justify-end min-h-[140px]">
                        <p class="text-3xl font-black text-indigo-400">R$ <span id="dash-fundo">0</span></p>
                        <p class="text-[8px] font-black uppercase tracking-widest text-indigo-500/60 mt-2 leading-none">Fundo Rota</p>
                    </div>
                </div>

                <div class="bg-slate-900 border border-white/5 p-8 rounded-[3rem] relative overflow-hidden" onclick="window.openTab('bike')">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1">Od√¥metro Fazer 250</p>
                            <h2 class="text-4xl font-black text-white leading-none"><span id="dash-km">0</span> <small class="text-xs text-slate-600">KM</small></h2>
                        </div>
                        <p class="text-[10px] font-black uppercase tracking-widest text-blue-400">29 KM/L</p>
                    </div>
                    <div class="mt-8 space-y-2">
                        <div class="w-full bg-slate-950 h-1.5 rounded-full overflow-hidden">
                            <div id="dash-oil-bar" class="bg-orange-500 h-full w-0 transition-all duration-1000"></div>
                        </div>
                        <p id="dash-oil-txt" class="text-[9px] font-black uppercase text-slate-500 tracking-widest text-center">Status do √ìleo...</p>
                    </div>
                </div>

                <div id="alerts-container" class="space-y-3"></div>
            </section>

            <!-- SA√öDE -->
            <section id="saude" class="tab-content space-y-6">
                <div class="bg-blue-600 p-8 rounded-[3rem] shadow-xl">
                    <div class="flex justify-between items-end mb-6">
                        <div>
                            <p class="text-[10px] font-black uppercase text-blue-200 tracking-widest">Hidrata√ß√£o ‚Ä¢ Meta 3.5L</p>
                            <h3 class="text-3xl font-black text-white"><span id="total-water-ml">0</span> <small class="text-xs">ML</small></h3>
                        </div>
                        <p id="water-perc" class="text-xl font-black text-white opacity-60">0%</p>
                    </div>
                    <div class="w-full bg-blue-900/30 h-3 rounded-full overflow-hidden">
                        <div id="water-bar" class="bg-white h-full w-0 transition-all duration-1000"></div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="window.addWater('work')" class="bg-slate-900 border border-white/5 p-6 rounded-[2.5rem] text-center active:scale-95 transition-all">
                        <p class="text-xl font-black">473ml</p>
                        <p class="text-[8px] font-black uppercase text-slate-500">Makro Engenharia</p>
                        <div class="mt-2 text-blue-500 font-black text-xs"><span id="cnt-work">0</span>/6</div>
                    </button>
                    <button onclick="window.addWater('home')" class="bg-slate-900 border border-white/5 p-6 rounded-[2.5rem] text-center active:scale-95 transition-all">
                        <p class="text-xl font-black">250ml</p>
                        <p class="text-[8px] font-black uppercase text-slate-500">Casa / Home</p>
                        <div class="mt-2 text-indigo-500 font-black text-xs"><span id="cnt-home">0</span>/2</div>
                    </button>
                </div>
                <button onclick="window.resetWater()" class="w-full py-4 text-[9px] font-black uppercase text-slate-600 tracking-widest border border-dashed border-white/10 rounded-2xl">Zerar Contador</button>
            </section>

            <!-- VE√çCULO -->
            <section id="bike" class="tab-content space-y-6">
                <div class="bg-slate-900 border border-white/5 p-6 rounded-[2.5rem] space-y-4">
                    <h3 class="text-[10px] font-black uppercase text-orange-500 tracking-widest">Lan√ßar Atividade</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <input type="number" id="v-km" placeholder="KM ATUAL" class="pulse-input">
                        <input type="number" id="v-val" placeholder="VALOR R$" class="pulse-input">
                    </div>
                    <select id="v-tipo" class="pulse-input">
                        <option value="ABASTECIMENTO">‚õΩ ABASTECIMENTO</option>
                        <option value="OLEO">üõ¢Ô∏è TROCA DE √ìLEO</option>
                        <option value="GERAL">üîß REVIS√ÉO GERAL</option>
                    </select>
                    <button onclick="window.lancarVeiculo()" class="w-full bg-blue-600/10 text-blue-500 border border-blue-500/20 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest">Registrar no Google Sheets</button>
                </div>
            </section>

            <!-- ABA WORK -->
            <section id="work" class="tab-content space-y-6">
                <div class="bg-slate-900 border border-white/5 p-6 rounded-[2.5rem] space-y-4">
                    <h3 class="text-[10px] font-black uppercase text-blue-500 tracking-widest">Tarefa Makro Eng.</h3>
                    <input type="text" id="w-task" placeholder="QUAL A ATIVIDADE?" class="pulse-input uppercase">
                    <input type="text" id="w-req" placeholder="QUEM SOLICITOU?" class="pulse-input uppercase">
                    <button onclick="window.addWorkTask()" class="w-full bg-blue-600 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest">Adicionar Tarefa</button>
                </div>
                <div id="task-list" class="space-y-3"></div>
            </section>

            <!-- FINAN√áAS -->
            <section id="financas" class="tab-content space-y-6">
                <div class="bg-slate-900 border border-white/5 p-6 rounded-[2.5rem] space-y-4">
                    <div class="grid grid-cols-2 gap-3">
                        <input type="number" id="f-val" placeholder="VALOR R$" class="pulse-input">
                        <select id="f-cat" class="pulse-input">
                            <option value="MAKRO">MAKRO ENG.</option>
                            <option value="VEICULO">YAMAHA FAZER</option>
                            <option value="ALIMENTACAO">ALIMENTA√á√ÉO</option>
                        </select>
                    </div>
                    <input type="text" id="f-desc" placeholder="DESCRI√á√ÉO" class="pulse-input uppercase">
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="window.movimento('IN')" class="bg-emerald-500/20 text-emerald-500 py-4 rounded-2xl font-black uppercase text-[10px]">Entrada</button>
                        <button onclick="window.movimento('OUT')" class="bg-red-500/20 text-red-500 py-4 rounded-2xl font-black uppercase text-[10px]">Sa√≠da</button>
                    </div>
                </div>
                <div id="fin-history" class="space-y-2"></div>
            </section>

        </main>
    </div>

    <!-- MOBILE NAV -->
    <nav class="md:hidden fixed bottom-0 left-0 right-0 h-20 bg-slate-900/90 backdrop-blur-2xl border-t border-white/5 z-[100] flex items-center justify-around">
        <button onclick="window.openTab('dashboard')" class="flex flex-col items-center gap-1 text-blue-500"><i data-lucide="layout-dashboard" class="w-5 h-5"></i><span class="text-[7px] font-black uppercase tracking-widest">Home</span></button>
        <button onclick="window.openTab('saude')" class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="activity" class="w-5 h-5"></i><span class="text-[7px] font-black uppercase tracking-widest">Sa√∫de</span></button>
        <button onclick="window.openTab('bike')" class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="bike" class="w-5 h-5"></i><span class="text-[7px] font-black uppercase tracking-widest">Fazer</span></button>
        <button onclick="window.openTab('work')" class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="briefcase" class="w-5 h-5"></i><span class="text-[7px] font-black uppercase tracking-widest">Work</span></button>
        <button onclick="window.openTab('financas')" class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="wallet" class="w-5 h-5"></i><span class="text-[7px] font-black uppercase tracking-widest">Money</span></button>
    </nav>

    <script type="module">
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwVDkNFRuFNyTh3We_8qvlrSDIa3G_y1Owo_l8K47qmw_tlwv3I-EMBfRplkYX6EkMUQw/exec";

        let state = {
            user: null,
            saldo: 0,
            fundo: 0,
            km: 0,
            kmOleo: 0,
            water: { work: 0, home: 0 },
            tasks: [],
            finHistory: []
        };

        const loadLocal = () => {
            const saved = localStorage.getItem('pulse_os_state');
            if(saved) state = JSON.parse(saved);
            updateUI();
        };

        const syncLocal = () => {
            localStorage.setItem('pulse_os_state', JSON.stringify(state));
            updateUI();
        };

        // GOOGLE SHEETS COMMS
        const gRequest = async (payload) => {
            return fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify(payload)
            }).then(r => r.json());
        };

        // LOGIN L√ìGICA
        window.handleLogin = async () => {
            const login = document.getElementById('login-user').value;
            const pass = document.getElementById('login-pass').value;
            const btn = document.getElementById('btn-login');
            const error = document.getElementById('login-error');

            if(!login || !pass) return;
            btn.innerHTML = `<span class="loader"></span>`;
            btn.disabled = true;
            error.classList.add('hidden');

            try {
                const res = await gRequest({ action: 'login', login, pass });
                if(res.success) {
                    state.user = { login, name: res.name };
                    if(res.forceChange) {
                        document.getElementById('modal-change-pass').classList.remove('hidden');
                        document.getElementById('modal-change-pass').classList.add('flex');
                    } else {
                        enterApp(res.name);
                    }
                } else {
                    error.innerText = res.message;
                    error.classList.remove('hidden');
                }
            } catch(e) {
                error.innerText = "Erro de conex√£o com servidor Google";
                error.classList.remove('hidden');
            } finally {
                btn.innerHTML = "Autenticar";
                btn.disabled = false;
            }
        };

        window.submitNewPassword = async () => {
            const newPass = document.getElementById('new-pass').value;
            const confirm = document.getElementById('confirm-pass').value;
            const btn = document.getElementById('btn-change-pass');

            if(newPass !== confirm || newPass.length < 4) return alert("Verifique a senha informada");
            
            btn.innerHTML = `<span class="loader"></span>`;
            btn.disabled = true;

            try {
                const res = await gRequest({ action: 'updatePassword', login: state.user.login, newPass });
                if(res.success) {
                    document.getElementById('modal-change-pass').classList.add('hidden');
                    enterApp(state.user.name);
                }
            } catch(e) {
                alert("Falha ao atualizar senha no servidor");
            } finally {
                btn.innerText = "Atualizar Acesso";
                btn.disabled = false;
            }
        };

        const enterApp = (name) => {
            document.getElementById('login-screen').classList.add('translate-y-[-100%]');
            setTimeout(() => {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('app-content').classList.remove('hidden');
                document.getElementById('display-user-name').innerText = name;
                lucide.createIcons();
            }, 500);
            syncLocal();
        };

        window.logout = () => { localStorage.clear(); location.reload(); };

        window.openTab = (id) => {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => {
                i.classList.remove('text-blue-500', 'bg-blue-500/10');
                i.classList.add('text-slate-500');
            });
            lucide.createIcons();
        };

        const updateUI = () => {
            document.getElementById('dash-saldo').innerText = state.saldo.toLocaleString('pt-BR');
            document.getElementById('dash-fundo').innerText = state.fundo.toLocaleString('pt-BR');
            document.getElementById('dash-km').innerText = state.km;
            
            const oilDiff = state.km - state.kmOleo;
            const oilPerc = Math.min((oilDiff / 5000) * 100, 100);
            document.getElementById('dash-oil-bar').style.width = oilPerc + '%';
            document.getElementById('dash-oil-txt').innerText = `TROCA EM ${Math.max(0, 5000 - oilDiff)} KM`;

            const totalWater = (state.water.work * 473) + (state.water.home * 250);
            const waterPerc = Math.min((totalWater / 3500) * 100, 100);
            document.getElementById('total-water-ml').innerText = totalWater;
            document.getElementById('water-perc').innerText = waterPerc.toFixed(0) + '%';
            document.getElementById('water-bar').style.width = waterPerc + '%';
            document.getElementById('cnt-work').innerText = state.water.work;
            document.getElementById('cnt-home').innerText = state.water.home;

            renderTasks();
            renderFinances();
            renderAlerts();
        };

        window.addWater = (type) => {
            if(type === 'work' && state.water.work < 6) state.water.work++;
            if(type === 'home' && state.water.home < 2) state.water.home++;
            syncLocal();
        };

        window.resetWater = () => { state.water = { work: 0, home: 0 }; syncLocal(); };

        window.lancarVeiculo = async () => {
            const km = parseInt(document.getElementById('v-km').value);
            const val = parseFloat(document.getElementById('v-val').value);
            const tipo = document.getElementById('v-tipo').value;
            if(!km || isNaN(val)) return;

            state.km = km;
            if(tipo === 'OLEO') state.kmOleo = km;
            state.saldo -= val;
            
            // Sincroniza com Google Sheets aba "Veiculo_Log"
            await gRequest({ action: 'syncData', userId: state.user?.login, data: { targetSheet: "Veiculo_Log", values: [new Date().toLocaleDateString(), km, tipo, "", "", val] } });
            
            state.finHistory.push({ tipo: 'OUT', cat: 'VE√çCULO', desc: tipo, val, data: new Date().toLocaleDateString() });
            syncLocal();
            document.getElementById('v-km').value = '';
            document.getElementById('v-val').value = '';
        };

        window.addWorkTask = () => {
            const titulo = document.getElementById('w-task').value;
            if(!titulo) return;
            state.tasks.push({ id: Date.now(), titulo, solicitante: document.getElementById('w-req').value, done: false });
            syncLocal();
            document.getElementById('w-task').value = '';
        };

        window.finishTask = (id) => {
            const task = state.tasks.find(t => t.id === id);
            if(task) task.done = true;
            syncLocal();
        };

        window.movimento = (tipo) => {
            const val = parseFloat(document.getElementById('f-val').value);
            if(isNaN(val)) return;
            state.saldo += (tipo === 'IN' ? val : -val);
            state.finHistory.push({ tipo, cat: document.getElementById('f-cat').value, desc: document.getElementById('f-desc').value, val, data: new Date().toLocaleDateString() });
            syncLocal();
            document.getElementById('f-val').value = '';
        };

        const renderTasks = () => {
            const list = document.getElementById('task-list');
            list.innerHTML = state.tasks.filter(t => !t.done).map(t => `
                <div class="bg-slate-900 border border-white/5 p-4 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black uppercase text-slate-300">${t.titulo}</p><p class="text-[7px] text-slate-600 font-bold uppercase">${t.solicitante || 'Makro'}</p></div>
                    <button onclick="window.finishTask(${t.id})" class="text-emerald-500"><i data-lucide="check-circle" class="w-5 h-5"></i></button>
                </div>
            `).join('');
            lucide.createIcons();
        };

        const renderFinances = () => {
            document.getElementById('fin-history').innerHTML = state.finHistory.slice(-4).reverse().map(t => `
                <div class="bg-slate-950 p-4 rounded-2xl flex justify-between items-center border border-white/5">
                    <div><p class="text-[9px] font-black uppercase text-slate-300">${t.desc || 'Geral'}</p><p class="text-[7px] text-slate-600 font-bold">${t.cat} ‚Ä¢ ${t.data}</p></div>
                    <span class="text-[10px] font-black ${t.tipo === 'IN' ? 'text-emerald-500' : 'text-red-500'}">${t.tipo === 'IN' ? '+' : '-'} R$ ${t.val.toFixed(0)}</span>
                </div>
            `).join('');
        };

        const renderAlerts = () => {
            const container = document.getElementById('alerts-container');
            container.innerHTML = '';
            const tCount = state.tasks.filter(t => !t.done).length;
            if(tCount > 0) container.innerHTML += `<div class="p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl flex items-center gap-3"><i data-lucide="briefcase" class="w-4 h-4 text-blue-500"></i><p class="text-[9px] font-bold text-blue-200">${tCount} Pend√™ncias na Makro Eng.</p></div>`;
            const oil = state.km - state.kmOleo;
            if(oil > 4500) container.innerHTML += `<div class="p-3 bg-orange-500/10 border border-orange-500/20 rounded-xl flex items-center gap-3"><i data-lucide="alert-triangle" class="w-4 h-4 text-orange-500"></i><p class="text-[9px] font-bold text-orange-200">Revis√£o de √≥leo obrigat√≥ria</p></div>`;
            lucide.createIcons();
        };

        window.onload = () => {
            loadLocal();
            lucide.createIcons();
        };
    </script>
</body>
</html>
