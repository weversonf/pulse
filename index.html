<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PULSE - Personal OS</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel for Browser Rendering -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .tab-content { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-[#F8FAFC]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { 
            Droplets, Bike, Briefcase, Settings, Plus, CheckCircle, 
            MessageSquare, LayoutDashboard, ExternalLink, Trash2, 
            ClipboardList, ChevronRight, ChevronDown, RefreshCw, 
            Map, Wrench, Save, Zap, Activity, ShieldCheck, 
            History, MapPin, CloudUpload, Navigation, Car
        } = lucideReact;

        const App = () => {
            const appName = "PULSE";

            // --- ESTADOS E CONFIGURAÇÕES ---
            const [settings, setSettings] = useState(() => {
                const saved = localStorage.getItem('pulse_settings');
                return saved ? JSON.parse(saved) : {
                    copoEscritorio: 473,
                    copoCasa: 250,
                    precoMonster: 13.50,
                    mlMonster: 473,
                    mgCafeinaMonster: 160,
                    peso: 80,
                    cidadeBase: 'Fortaleza',
                    saasSyncUrl: "",
                    autoSave: true,
                    precoGasolina: 6.20,
                    veiculoTipo: 'moto',
                    veiculoModelo: 'Fazer 250',
                    veiculoConsumo: 29,
                    kmAtual: 5000,
                    ultimaTrocaOleo: 4500
                };
            });

            const [activeTab, setActiveTab] = useState('dashboard');
            const [showSavedToast, setShowSavedToast] = useState(false);
            const [isSyncing, setIsSyncing] = useState(false);
            const [showCompletedTasks, setShowCompletedTasks] = useState(false);

            // Makro Tasks
            const [makroTasks, setMakroTasks] = useState(() => {
                const saved = localStorage.getItem('pulse_makro_tasks');
                return saved ? JSON.parse(saved) : [
                    { id: 1, title: 'Checklist Guindaste LTM 11200', status: 'pending', type: 'Inteligência Industrial', requester: 'Operações', deadline: new Date().toISOString().split('T')[0] }
                ];
            });

            const [newTask, setNewTask] = useState({ title: '', category: 'Social Media', requester: '', deadline: new Date().toISOString().split('T')[0] });

            // Veículo & Trips
            const [bikeTrips, setBikeTrips] = useState(() => {
                const saved = localStorage.getItem('pulse_bike_trips');
                return saved ? JSON.parse(saved) : [];
            });
            const [newTrip, setNewTrip] = useState({ dest: '', km: '' });
            const [isCalculatingRoute, setIsCalculatingRoute] = useState(false);
            const [routeError, setRouteError] = useState('');

            const [maintenanceLogs, setMaintenanceLogs] = useState(() => {
                const saved = localStorage.getItem('pulse_maintenance_logs');
                return saved ? JSON.parse(saved) : [];
            });
            const [newService, setNewService] = useState({ desc: '', km: '', cost: '' });

            // Saúde
            const [waterLogs, setWaterLogs] = useState(() => {
                const saved = localStorage.getItem('pulse_water_logs');
                return saved ? JSON.parse(saved) : [];
            });
            const [monsterLogs, setMonsterLogs] = useState(() => {
                const saved = localStorage.getItem('pulse_monster_logs');
                return saved ? JSON.parse(saved) : [];
            });

            const today = new Date().toLocaleDateString();

            // --- PERSISTÊNCIA ---
            useEffect(() => {
                if (settings.autoSave) {
                    localStorage.setItem('pulse_settings', JSON.stringify(settings));
                    localStorage.setItem('pulse_makro_tasks', JSON.stringify(makroTasks));
                    localStorage.setItem('pulse_water_logs', JSON.stringify(waterLogs));
                    localStorage.setItem('pulse_monster_logs', JSON.stringify(monsterLogs));
                    localStorage.setItem('pulse_bike_trips', JSON.stringify(bikeTrips));
                    localStorage.setItem('pulse_maintenance_logs', JSON.stringify(maintenanceLogs));
                }
            }, [settings, makroTasks, waterLogs, monsterLogs, bikeTrips, maintenanceLogs]);

            // --- CÁLCULOS ---
            const calculateCaffeineRemaining = () => {
                if (monsterLogs.length === 0) return 0;
                const now = new Date();
                let total = 0;
                monsterLogs.forEach(log => {
                    if (log.date === today) {
                        const hoursPassed = (now - new Date(log.timestamp)) / (1000 * 60 * 60);
                        total += (Number(settings.mgCafeinaMonster) || 160) * Math.pow(0.5, hoursPassed / 5);
                    }
                });
                return Math.round(total);
            };

            const kmProximaTroca = (Number(settings.ultimaTrocaOleo) || 0) + (settings.veiculoTipo === 'moto' ? 3000 : 10000);
            const kmFaltantesOleo = kmProximaTroca - (Number(settings.kmAtual) || 0);
            const waterToday = waterLogs.filter(l => l.date === today).reduce((acc, curr) => acc + curr.amount, 0);
            const waterPercentage = Math.min(Math.round((waterToday / 3500) * 100), 100);
            const caffeineCurrent = calculateCaffeineRemaining();

            // --- FUNÇÕES ---
            const addWater = (amount) => {
                const newLog = { id: Date.now(), amount: Number(amount), time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }), date: today };
                setWaterLogs([newLog, ...waterLogs]);
            };

            const addMonster = () => {
                const newLog = { id: Date.now(), amount: settings.mlMonster, timestamp: new Date().toISOString(), date: today };
                setMonsterLogs([newLog, ...monsterLogs]);
            };

            const handleAddTask = (e) => {
                e.preventDefault();
                if (!newTask.title.trim()) return;
                setMakroTasks([{ id: Date.now(), title: newTask.title, status: 'pending', type: newTask.category, requester: newTask.requester || 'Makro', deadline: newTask.deadline }, ...makroTasks]);
                setNewTask({ ...newTask, title: '', requester: '' });
            };

            const toggleTask = (id) => setMakroTasks(makroTasks.map(t => t.id === id ? { ...t, status: t.status === 'done' ? 'pending' : 'done' } : t));
            const deleteTask = (id) => setMakroTasks(makroTasks.filter(t => t.id !== id));

            const handleAutoCalculateKm = async () => {
                if (!newTrip.dest || !settings.cidadeBase) {
                    setRouteError('Preencha o destino primeiro.');
                    setTimeout(() => setRouteError(''), 3000);
                    return;
                }
                setIsCalculatingRoute(true);
                try {
                    const resO = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(settings.cidadeBase)}`);
                    const dataO = await resO.json();
                    const resD = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(newTrip.dest)}`);
                    const dataD = await resD.json();
                    
                    if (dataO[0] && dataD[0]) {
                        const resR = await fetch(`https://router.project-osrm.org/route/v1/driving/${dataO[0].lon},${dataO[0].lat};${dataD[0].lon},${dataD[0].lat}?overview=false`);
                        const dataR = await resR.json();
                        if (dataR.routes[0]) setNewTrip({ ...newTrip, km: (dataR.routes[0].distance / 1000).toFixed(1) });
                    }
                } catch (e) { setRouteError('Erro no GPS. Digite manual.'); }
                finally { setIsCalculatingRoute(false); }
            };

            const handleAddTrip = (e) => {
                e.preventDefault();
                if (!newTrip.dest || !newTrip.km) return;
                const fuel = (Number(newTrip.km) / settings.veiculoConsumo).toFixed(2);
                const cost = (fuel * settings.precoGasolina).toFixed(2);
                setBikeTrips([{ id: Date.now(), destination: newTrip.dest, km: newTrip.km, fuel, cost, date: new Date().toLocaleDateString() }, ...bikeTrips]);
                setNewTrip({ dest: '', km: '' });
            };

            const handleAddMaintenance = (e) => {
                e.preventDefault();
                if (!newService.desc || !newService.km) return;
                setMaintenanceLogs([{ id: Date.now(), service: newService.desc, km: Number(newService.km), cost: Number(newService.cost) || 0, date: new Date().toLocaleDateString() }, ...maintenanceLogs]);
                setNewService({ desc: '', km: '', cost: '' });
            };

            const syncSaaS = () => {
                setIsSyncing(true);
                setTimeout(() => { setIsSyncing(false); setShowSavedToast(true); setTimeout(() => setShowSavedToast(false), 2000); }, 1500);
            };

            // --- COMPONENTE DE NAVEGAÇÃO ---
            const NavItem = ({ icon: Icon, label, id }) => (
                <button 
                    onClick={() => setActiveTab(id)}
                    class={`w-full flex items-center gap-4 p-4 rounded-xl transition-all relative group ${activeTab === id ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}
                >
                    <Icon size={20} />
                    <span class="font-black hidden md:block text-[11px] uppercase tracking-widest italic">{label}</span>
                </button>
            );

            return (
                <div class="flex h-screen overflow-hidden">
                    {/* Sidebar */}
                    <aside class="w-20 md:w-64 bg-slate-900 text-white flex flex-col border-r border-white/5">
                        <div class="p-6 flex items-center gap-3 justify-center md:justify-start">
                            <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center font-black italic text-xl">P</div>
                            <div class="hidden md:block">
                                <span class="font-black text-lg block leading-none uppercase tracking-tighter">{appName}</span>
                                <span class="text-[9px] text-slate-500 font-bold uppercase italic tracking-widest">Personal OS</span>
                            </div>
                        </div>
                        <nav class="flex-1 px-3 space-y-1">
                            <NavItem icon={LayoutDashboard} label="Dashboard" id="dashboard" />
                            <NavItem icon={Activity} label="Saúde" id="health" />
                            <div class="pt-4 pb-2 px-4 opacity-30 text-[10px] uppercase font-bold tracking-widest hidden md:block">Corporativo</div>
                            <NavItem icon={Briefcase} label="Makro" id="makro" />
                            <NavItem icon={settings.veiculoTipo === 'moto' ? Bike : Car} label={settings.veiculoModelo} id="bike" />
                        </nav>
                        <div class="p-3 border-t border-white/5">
                            <NavItem icon={Settings} label="Ajustes" id="settings" />
                        </div>
                    </aside>

                    {/* Main */}
                    <main class="flex-1 overflow-y-auto bg-[#F8FAFC]">
                        <header class="sticky top-0 bg-[#F8FAFC]/80 backdrop-blur-md px-6 py-6 md:px-10 flex items-center justify-between border-b border-slate-200 z-10">
                            <div>
                                <h1 class="text-2xl font-black uppercase italic leading-none">{activeTab}</h1>
                                <p class="text-slate-400 font-bold text-[10px] uppercase tracking-widest mt-1">Fortaleza • {today}</p>
                            </div>
                            <button onClick={addMonster} class="bg-slate-900 text-white px-5 py-2.5 rounded-xl hover:bg-blue-600 transition flex items-center gap-3 shadow-lg active:scale-95">
                                <Zap size={18} class="text-green-400" fill="currentColor" />
                                <span class="font-black text-[10px] uppercase tracking-widest">Energy</span>
                            </button>
                        </header>

                        <div class="p-6 md:p-10 max-w-6xl mx-auto space-y-6">
                            {activeTab === 'dashboard' && (
                                <div class="tab-content grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    <div onClick={() => window.open('https://weversonf.github.io/pesquisa-nps-02/', '_blank')} class="bg-blue-600 p-6 rounded-3xl text-white shadow-lg cursor-pointer hover:bg-blue-700 transition relative overflow-hidden group">
                                        <MessageSquare class="mb-4 opacity-50" />
                                        <p class="text-5xl font-black italic mb-1">50</p>
                                        <p class="text-[10px] font-black uppercase tracking-widest italic opacity-80">NPS Makro Engenharia</p>
                                        <ExternalLink size={14} class="absolute top-6 right-6 opacity-0 group-hover:opacity-100 transition" />
                                    </div>
                                    <div onClick={() => setActiveTab('makro')} class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm cursor-pointer hover:border-blue-500 transition group">
                                        <ClipboardList class="mb-4 text-slate-300 group-hover:text-blue-500 transition" />
                                        <p class="text-5xl font-black italic mb-1">{makroTasks.filter(t=>t.status==='pending').length}</p>
                                        <p class="text-[10px] font-black uppercase tracking-widest italic text-slate-400">Tarefas Pendentes</p>
                                    </div>
                                    <div onClick={() => setActiveTab('bike')} class="bg-slate-900 p-6 rounded-3xl text-white shadow-xl relative overflow-hidden group cursor-pointer">
                                        <Wrench class="mb-4 text-blue-500" />
                                        <p class="text-4xl font-black italic mb-1 tracking-tighter">{kmFaltantesOleo}km</p>
                                        <p class="text-[10px] font-black uppercase tracking-widest italic text-slate-500">Próxima Revisão</p>
                                        <Bike size={100} class="absolute -right-4 -bottom-4 opacity-5 group-hover:opacity-10 transition" />
                                    </div>
                                    <div class="lg:col-span-2 bg-white p-8 rounded-3xl border border-slate-200">
                                        <div class="flex justify-between items-end mb-6">
                                            <div>
                                                <h3 class="font-black uppercase italic text-slate-800 flex items-center gap-2"><Droplets class="text-blue-500" size={20}/> Hidratação</h3>
                                                <p class="text-[11px] font-bold text-slate-400">Meta Diária: 3.5L</p>
                                            </div>
                                            <span class="text-5xl font-black italic">{(waterToday/1000).toFixed(2)}<small class="text-xl text-slate-300 ml-1">L</small></span>
                                        </div>
                                        <div class="w-full bg-slate-50 h-5 rounded-full overflow-hidden border border-slate-100">
                                            <div class="bg-blue-500 h-full transition-all duration-1000" style={{width: `${waterPercentage}%`}}></div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'health' && (
                                <div class="tab-content space-y-8">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        <div class="bg-white p-10 rounded-3xl border border-slate-200 shadow-sm text-center">
                                            <Droplets size={40} class="mx-auto text-blue-500 mb-6" />
                                            <p class="text-[8rem] font-black italic leading-none text-slate-900 tracking-tighter">{(waterToday/1000).toFixed(2)}</p>
                                            <p class="text-2xl font-black text-slate-200 uppercase italic mb-10">Litros Consumidos</p>
                                            <div class="flex justify-center gap-4">
                                                <button onClick={() => addWater(settings.copoEscritorio)} class="bg-blue-50 text-blue-600 px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest border border-blue-100 hover:bg-blue-600 hover:text-white transition-all italic">Copo Makro ({settings.copoEscritorio}ml)</button>
                                                <button onClick={() => addWater(settings.copoCasa)} class="bg-blue-50 text-blue-600 px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest border border-blue-100 hover:bg-blue-600 hover:text-white transition-all italic">Vaso Casa ({settings.copoCasa}ml)</button>
                                            </div>
                                        </div>
                                        <div class="bg-slate-900 p-10 rounded-3xl shadow-xl text-white text-center flex flex-col justify-between">
                                            <div>
                                                <Zap size={40} class="mx-auto text-green-400 mb-6" fill="currentColor" />
                                                <p class="text-[8rem] font-black italic leading-none text-green-400 tracking-tighter">{caffeineCurrent}</p>
                                                <p class="text-2xl font-black text-slate-700 uppercase italic mb-8">mg de Cafeína Bio</p>
                                            </div>
                                            <p class="text-[10px] font-black uppercase text-slate-500 italic opacity-50">Baseado na meia-vida de 5h</p>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'makro' && (
                                <div class="tab-content space-y-6">
                                    <div class="bg-white rounded-[2rem] border border-slate-200 shadow-xl overflow-hidden">
                                        <div class="p-8 border-b border-slate-100 bg-slate-50/50">
                                            <h3 class="font-black text-xl uppercase italic mb-6 flex items-center gap-3 text-slate-800"><Briefcase class="text-blue-600" /> Makro Engenharia Pipeline</h3>
                                            <form onSubmit={handleAddTask} class="space-y-4">
                                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                                    <input type="text" placeholder="Job / Atividade..." value={newTask.title} onChange={e=>setNewTask({...newTask, title:e.target.value})} class="w-full bg-white border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none focus:border-blue-500 shadow-sm" />
                                                    <input type="text" placeholder="Solicitante..." value={newTask.requester} onChange={e=>setNewTask({...newTask, requester:e.target.value})} class="w-full bg-white border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none focus:border-blue-500 shadow-sm" />
                                                </div>
                                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                    <select value={newTask.category} onChange={e=>setNewTask({...newTask, category:e.target.value})} class="bg-white border border-slate-200 rounded-xl px-4 py-4 font-black text-[10px] uppercase outline-none italic tracking-widest shadow-sm">
                                                        <option>Social Media</option>
                                                        <option>Endomarketing</option>
                                                        <option>Inteligência Industrial</option>
                                                        <option>Campanha Makro</option>
                                                    </select>
                                                    <input type="date" value={newTask.deadline} onChange={e=>setNewTask({...newTask, deadline:e.target.value})} class="w-full bg-white border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none shadow-sm focus:border-blue-500 text-slate-500" />
                                                    <button type="submit" class="bg-slate-900 text-white rounded-xl px-8 font-black uppercase text-[10px] tracking-widest hover:bg-blue-600 transition shadow-lg italic h-full">Adicionar</button>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="overflow-x-auto italic">
                                            <div class="p-4 bg-slate-50/80 border-b border-slate-100 text-[10px] font-black text-slate-400 uppercase tracking-widest">Jobs Pendentes</div>
                                            <table class="w-full text-left">
                                                <thead>
                                                    <tr class="bg-white border-b border-slate-100 text-[10px] font-black text-slate-400 uppercase italic">
                                                        <th class="px-8 py-4">Atividade</th>
                                                        <th class="px-8 py-4">Tipo</th>
                                                        <th class="px-8 py-4">Solicitante</th>
                                                        <th class="px-8 py-4">Deadline</th>
                                                        <th class="px-8 py-4 text-right">Ações</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="divide-y divide-slate-100 font-bold text-sm">
                                                    {makroTasks.filter(t=>t.status==='pending').map(task => (
                                                        <tr key={task.id} class="group hover:bg-slate-50 transition-all">
                                                            <td class="px-8 py-5 flex items-center gap-4">
                                                                <button onClick={()=>toggleTask(task.id)} class="text-slate-200 hover:text-green-500 transition"><CheckCircle size={20}/></button>
                                                                <span class="text-slate-800 uppercase tracking-tighter">{task.title}</span>
                                                            </td>
                                                            <td class="px-8 py-5 text-[10px] uppercase text-slate-400">{task.type}</td>
                                                            <td class="px-8 py-5 text-slate-500">{task.requester}</td>
                                                            <td class="px-8 py-5 text-blue-600 text-xs">{task.deadline}</td>
                                                            <td class="px-8 py-5 text-right">
                                                                <button onClick={()=>deleteTask(task.id)} class="text-slate-200 hover:text-red-500 opacity-0 group-hover:opacity-100 transition"><Trash2 size={18}/></button>
                                                            </td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="border-t border-slate-200">
                                            <button onClick={()=>setShowCompletedTasks(!showCompletedTasks)} class="w-full p-4 bg-slate-50/80 flex items-center justify-between hover:bg-slate-100 transition">
                                                <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Histórico de Concluídos</span>
                                                <ChevronDown size={16} class={`text-slate-400 transition ${showCompletedTasks ? 'rotate-180':''}`} />
                                            </button>
                                            {showCompletedTasks && (
                                                <div class="italic">
                                                    <table class="w-full text-left">
                                                        <tbody class="divide-y divide-slate-100 font-bold text-sm bg-slate-50/30">
                                                            {makroTasks.filter(t=>t.status==='done').map(task => (
                                                                <tr key={task.id} class="group hover:bg-slate-50">
                                                                    <td class="px-8 py-5 flex items-center gap-4">
                                                                        <button onClick={()=>toggleTask(task.id)} class="text-green-500"><CheckCircle size={20} fill="currentColor" class="text-white"/></button>
                                                                        <span class="text-slate-300 line-through uppercase tracking-tighter">{task.title}</span>
                                                                    </td>
                                                                    <td class="px-8 py-5 text-slate-300 text-right pr-8"><Trash2 size={16} onClick={()=>deleteTask(task.id)} class="cursor-pointer opacity-0 group-hover:opacity-100 transition"/></td>
                                                                </tr>
                                                            ))}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'bike' && (
                                <div class="tab-content space-y-6">
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 italic text-center">
                                        <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm">
                                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Hodômetro</p>
                                            <p class="text-4xl font-black italic">{settings.kmAtual}km</p>
                                        </div>
                                        <div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm">
                                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Gasolina</p>
                                            <p class="text-4xl font-black italic">R$ {settings.precoGasolina}</p>
                                        </div>
                                        <div class="bg-slate-900 p-6 rounded-3xl shadow-xl col-span-1 md:col-span-2 flex items-center gap-6 text-white relative overflow-hidden">
                                            <Wrench size={40} class="text-blue-500" />
                                            <div class="text-left">
                                                <p class="text-[10px] font-black text-slate-500 uppercase italic mb-2">Manutenção</p>
                                                <p class="text-sm font-bold uppercase italic tracking-tighter">Revisão em {kmFaltantesOleo}km</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 italic">
                                        <div class="bg-white rounded-[2rem] border border-slate-200 shadow-xl overflow-hidden flex flex-col">
                                            <div class="p-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between">
                                                <h3 class="font-black text-xl uppercase italic text-slate-800">Manutenção</h3>
                                                <History class="text-blue-600" />
                                            </div>
                                            <div class="p-8">
                                                <form onSubmit={handleAddMaintenance} class="space-y-4 mb-6">
                                                    <input type="text" placeholder="Serviço..." value={newService.desc} onChange={e=>setNewService({...newService, desc:e.target.value})} class="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none" />
                                                    <div class="flex gap-2">
                                                        <input type="number" placeholder="KM" value={newService.km} onChange={e=>setNewService({...newService, km:e.target.value})} class="flex-1 bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none" />
                                                        <input type="number" placeholder="R$" value={newService.cost} onChange={e=>setNewService({...newService, cost:e.target.value})} class="flex-1 bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none" />
                                                        <button type="submit" class="bg-slate-900 text-white px-6 rounded-xl"><Plus size={18}/></button>
                                                    </div>
                                                </form>
                                                <div class="space-y-3 max-h-60 overflow-y-auto">
                                                    {maintenanceLogs.map(log => (
                                                        <div key={log.id} class="p-4 bg-slate-50 rounded-2xl flex justify-between font-bold text-xs uppercase">
                                                            <div>{log.service}</div>
                                                            <div class="text-blue-600">R$ {log.cost}</div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-white rounded-[2rem] border border-slate-200 shadow-xl overflow-hidden flex flex-col">
                                            <div class="p-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between">
                                                <h3 class="font-black text-xl uppercase italic text-slate-800">Trips</h3>
                                                <Map class="text-blue-600" />
                                            </div>
                                            <div class="p-8">
                                                <form onSubmit={handleAddTrip} class="space-y-4 mb-6">
                                                    <input type="text" placeholder="Destino..." value={newTrip.dest} onChange={e=>setNewTrip({...newTrip, dest:e.target.value})} class="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none" />
                                                    <div class="flex gap-2 relative">
                                                        <input type="number" placeholder="KM" value={newTrip.km} onChange={e=>setNewTrip({...newTrip, km:e.target.value})} class="flex-1 bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none pr-10" />
                                                        <button type="button" onClick={handleAutoCalculateKm} class="absolute right-16 top-1/2 -translate-y-1/2 text-slate-400 hover:text-blue-500 transition">
                                                            {isCalculatingRoute ? <RefreshCw size={16} class="animate-spin" /> : <MapPin size={16} />}
                                                        </button>
                                                        <button type="submit" class="bg-slate-900 text-white px-6 rounded-xl"><Plus size={18}/></button>
                                                    </div>
                                                </form>
                                                <div class="space-y-3 max-h-60 overflow-y-auto italic">
                                                    {bikeTrips.map(trip => (
                                                        <div key={trip.id} class="p-4 bg-slate-50 rounded-2xl flex justify-between font-bold text-xs">
                                                            <div>{trip.destination}</div>
                                                            <div class="text-green-600">R$ {trip.cost}</div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {settings.saasSyncUrl && (
                                        <button onClick={syncSaaS} class="w-full py-5 rounded-3xl font-black uppercase text-[11px] tracking-widest transition border bg-white text-blue-600 border-blue-100 hover:bg-blue-50 flex items-center justify-center gap-3">
                                            <CloudUpload size={20} class={isSyncing ? 'animate-bounce' : ''}/> {isSyncing ? 'Sincronizando SaaS...' : 'Sync SaaS'}
                                        </button>
                                    )}
                                </div>
                            )}

                            {activeTab === 'settings' && (
                                <div class="tab-content max-w-2xl mx-auto space-y-6 pb-40 italic">
                                    <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm overflow-hidden">
                                        <h3 class="font-black text-xl uppercase italic mb-8 flex items-center gap-4 text-slate-900 leading-none"><Save size={24} class="text-blue-600" /> Sistema PULSE</h3>
                                        <div class="space-y-4">
                                            <div class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100">
                                                <div>
                                                    <p class="font-black text-sm uppercase italic text-slate-800 leading-none mb-1">Auto Save</p>
                                                    <p class="text-[10px] font-bold text-slate-400 uppercase italic tracking-tighter">Persistência Local Ativa</p>
                                                </div>
                                                <button onClick={() => updateSetting('autoSave', !settings.autoSave)} class={`w-14 h-8 rounded-full transition-all relative ${settings.autoSave ? 'bg-blue-600' : 'bg-slate-300'}`}>
                                                    <div class={`absolute top-1 w-6 h-6 bg-white rounded-full transition-all shadow-sm ${settings.autoSave ? 'left-7' : 'left-1'}`} />
                                                </button>
                                            </div>
                                            <div class="p-4 bg-blue-50/50 rounded-2xl border border-blue-100">
                                                <label class="block text-[9px] font-black text-blue-400 uppercase mb-2 ml-2 tracking-widest italic leading-none">SaaS Sync Endpoint</label>
                                                <input type="text" value={settings.saasSyncUrl} onChange={e=>updateSetting('saasSyncUrl', e.target.value)} class="w-full bg-white border border-blue-100 rounded-xl p-3 font-bold text-xs text-blue-700 outline-none" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm">
                                        <h3 class="font-black text-xl uppercase italic mb-8 flex items-center gap-4 text-slate-900 leading-none"><MapPin size={24} class="text-red-500" /> Localização Base</h3>
                                        <input type="text" value={settings.cidadeBase} onChange={e=>updateSetting('cidadeBase', e.target.value)} class="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold text-sm outline-none" />
                                    </div>
                                    <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm">
                                        <h3 class="font-black text-xl uppercase italic mb-8 flex items-center gap-4 text-slate-900 leading-none"><Wrench size={24} class="text-orange-500" /> Manutenção</h3>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-[10px] font-black text-slate-400 uppercase mb-2 ml-2">Hodômetro Atual</label>
                                                <input type="number" value={settings.kmAtual} onChange={e=>updateSetting('kmAtual', e.target.value)} class="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-black text-xl outline-none" />
                                            </div>
                                            <div>
                                                <label class="block text-[10px] font-black text-slate-400 uppercase mb-2 ml-2">Última Troca Óleo</label>
                                                <input type="number" value={settings.ultimaTrocaOleo} onChange={e=>updateSetting('ultimaTrocaOleo', e.target.value)} class="w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-black text-xl outline-none" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </main>

                    {showSavedToast && (
                        <div class="fixed bottom-10 right-10 bg-green-500 text-white px-6 py-3 rounded-xl shadow-2xl font-black uppercase text-[10px] tracking-widest flex items-center gap-3 animate-in slide-in-from-right-10 z-50">
                            <Check size={16} /> {appName} Synced
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
